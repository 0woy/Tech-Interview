### [1주차] 운영체제 개요 + 프로세스 & 스레드
- 운영체제란
- 운영체제의 목적
- 운영체제의 종류
- 운영체제의 역할
- 커널
- 프로세스
- 컨텍스트 스위치
- 스레드
- 프로세스 vs 스레드
- 멀티 프로세싱
- 멀티 스레딩
- 헷갈리는 용어

## 운영체제란

운영체제란 컴퓨터 하드웨어 바로 위에 설치되어 사용자 및 다른 모든 소프트웨어와 하드웨어를 연결하는 소프트웨어 계층이다.

![os1](https://github.com/user-attachments/assets/e980b88a-49af-4212-a007-88d2e63a6565)

## 운영체제의 목적

- 컴퓨터 시스템을 편리하게 사용할 수 있는 환경을 제공한다.
  - 운영체제는 여러 사용자 및 프로그램들에게 각각 독자적으로 컴퓨터를 사용하는 것 같은 환상을 제공한다.
  - 하드웨어를 직접 다루는 복잡한 부분을 운영체제가 대행함으로써 각 사용자 및 프로그램은 자세한 내용을 알지 못해도 프로그램을 실행할 수 있도록 한다.
- 컴퓨터 시스템의 자원을 효율적으로 관리한다.
  - 운영체제는 CPU, 메모리, 하드디스크 등의 하드웨어 자원과 파일, 프로세스 등의 소프트웨어 자원을 효율적으로 관리하면서 자원을 사용자 간에 형평성 있게 분배한다.

## 운영체제의 종류

- 동시 작업 가능 여부
  - 단일 작업 운영체제
    - 한 번에 하나의 작업만 처리한다.
    - 한 명령의 수행이 끝나기 전에 다른 명령을 수행할 수 없다.
    - ex) MS-DOS
  - 다중 작업 운영체제
    - 동시에 두 개 이상의 작업을 처리한다.
    - 한 명령의 수행이 끝나기 전에 다른 명령을 수행할 수 있다.
    - ex) UNIX, MS Windows
- 사용자 수
  - 단일 사용자용 운영체제
    - 한 번에 한 명의 사용자만 사용하도록 허용한다.(한 계정에 동시에 두 명이 접속할 수 없다)
    - ex) MS-DOS, MS Windows
  - 다중 사용자용 운영체제
    - 여러 사용자가 동시에 접속해 사용할 수 있다.
    - ex) UNIX, NT server
- 처리 방식
  - 일괄 처리 방식 운영체제
    - 작업을 모아서 한꺼번에 처리한다.
    - 작업이 완전히 종료될 때까지 기다려야 한다.
    - ex) Punch Card 처리 시스템
  - 시분할 방식 운영체제
    - 여러 작업을 수행할 때 컴퓨터 처리 능력을 일정 시간 단위로 분할해 사용한다.
    - 일괄 처리 방식에 비해 응답 시간이 짧다.
    - 사용자의 요청에 대한 결과를 곧바로 얻을 수 있으므로 대화형 시스템이라고 부른다.
    - ex) UNIX
  - 실시간 방식 운영체제
    - 정해진 시간 안에 어떠한 일이 반드시 처리됨을 보장한다.
    - 제때 제대로 제어가 되지 않으면 치명적인 작업들에서 사용된다.
    - ex) 원자로/공장 제어 시스템, 미사일 제어 시스템, 반도체 장비 시스템, 네비게이션 시스템, 블랙박스 시스템

## 운영체제의 역할

![os2](https://github.com/user-attachments/assets/a8fe070a-32dc-4d07-aa68-30ead42dd983)

- CPU 스케줄링
  - 일반적으로 CPU는 컴퓨터 한 대에 하나가 장착되기 때문에 여러 프로세스들이 CPU를 효율적으로 나눠 사용할 수 있도록 관리한다.
  - 대표적인 스케줄링 기법: 선입 선출, 라운드 로빈, 우선 순위 기법 등
- 메모리 관리
  - 메모리는 CPU가 직접 접근할 수 있는 컴퓨터 내부의 기억 장치이며, 프로그램이 CPU에서 실행되려면 해당 부분이 메모리에 올라가 있어야 한다. 이때 한정된 메모리 공간에 여러 프로그램을 수용할 수 있도록 관리한다.
  - 대표적인 메모리 관리 방식: 고정 분할 방식, 가변 분할 방식 등
- 파일 관리
  - 파일을 저장하는 디스크의 용량도 한정적이기 때문에 파일을 연속적인 공간에 찾기 쉽게 저장할 것인지, 많은 양의 파일을 저장하기 위해서 파일을 조각 조각 잘라 여기 저기에 저장할지 판단한다.
- 입출력 관리
  - 키보드, 마우스, 모니터 등 우리가 접하는 수많은 입출력 장치들은 CPU에 비해 많이 느리다. 그래서 이 디바이스들과 컴퓨터가 어떠한 방식으로 정보를 주고 받는 지가 컴퓨터의 성능과 직결된다.
- 프로세스 관리
  - ‘현재 실행중인 프로그램’을 뜻하는 프로세스를 생성하거나 종료하고 여러 프로세스가 함께 작업할 때 프로세스 간의 협력을 돕는다. (추후 자세히 배울 예정)

## 커널

- 커널은 운영체제의 핵심 부분으로 Mode bit를 통해 두 가지 모드로 동작할 수 있다. Mode bit는 사용자 프로그램의 잘못된 수행으로 인한 피해를 방지하기 위한 보호 장치다.
- 사용자 모드(mode bit 1)
  - 사용자 프로그램이나 애플리케이션이 실행되는 모드
  - 프로그램이 하드웨어에 직접 접근할 수 없다.
- 커널 모드(mode bit 0)
  - 운영체제의 코드가 실행되는 모드
  - 보안을 해칠 수 있는 중요한 명령어는 커널 모드에서만 수행이 가능하다.
  - 하드웨어에 직접 접근할 수 있다.

## 프로세스

- 프로세스는 실행 중인 프로그램을 말한다. 디스크에 실행 파일 형태로 존재하던 프로그램이 메모리에 올라가서 실행되기 시작하면 비로소 생명력을 갖는 프로세스가 되는 것이다.

  ※ 프로세서는 CPU를 의미한다.

- 프로세스의 문맥
  - 특정 시점을 놓고 봤을 때, 현재 프로세스의 상태를 나타내는데 필요한 모든 요소들(PC가 어디를 가리키는지, 프로세스 메모리에 무엇을 담고 있는지 등)을 말한다
  - CPU 수행 상태를 나타내는 하드웨어 문맥 → 현재 시점에 프로세스가 명령을 어디까지 수행했는지 판단하는 지표
    - Program Counter
    - 각종 register
  - 프로세스의 주소 공간
    - code, stack, data
  - 프로세스 관련 커널 자료 구조
    - PCB : 운영체제가 각 프로세스를 관리하기 위해 프로세스당 유지하는 정보이다. 운영영체제는 PCB를 통해 프로세스에게 CPU 자원과 메모리 자원을 할당하고 프로세스가 잘못된 동작을 하지 않도록 감시하고 제어한다.
    - kernel stack : 여러 프로세스가 공유하는 코드로 어떤 프로세스든 요청할때 커널의 코드를 실행하고 호출 정보를 커널 스택에 프로세스 별로 저장한다

❓ 프로세스의 문맥을 기억해두는 이유 : 운영체제는 시간을 나눠서 프로세스가 CPU를 번걸아가면서 사용하게 하는데 이때 문맥을 저장하지 않으면, 다시 실행될 때 해당 프로세스가 어디서부터 다시 시작해야 하는지 알 수 없다.

## 컨텍스트 스위치(문맥 교환)

- 컨텍스트 스위치란 CPU를 한 프로세스에서 다른 프로세스로 넘겨주는 과정을 말한다.
- 컨텍스트 스위치가 일어났을 때 운영체제는 다음 과정을 수행한다.
  - CPU를 내어주는 프로세스의 상태를 그 프로세스의 PCB에 저장한다.
  - CPU를 새롭게 얻는 프로세스의 상태를 PCB에서 읽어온다.
- 타이머 인터럽트가 발생한 경우에는 무조건 컨텍스트 스위치가 일어나지만 시스템 콜은 그 종류(동기적/비동기적)에 따라 컨텍스트 스위치가 일어날지 말지가 결정된다.

  ※ 시스템 콜 : 사용자 프로그램이 운영체제에 특정 작업을 요청하는 방식(파일 읽기, 메모리 할당 등)

## 스레드
![os3](https://github.com/user-attachments/assets/0fb5c129-b7e8-4e3b-bc0e-d14fcc58abf5)

- 프로세스 내에서 실행 되는 여러 흐름의 단위이다. 쉽게 말해 경량화된 프로세스 라고도 한다.
- 공유할 수 있는 부분은 동료 스레드와 최대한 공유한다.
- 스레드 구성
  - 별도로 가진 부분 : program counter, register set, stack space
    → CPU 수행과 관련된 정보
  - 공유하는 부분 : code section, data section, OS resources
- 스레드의 장점
  - 응답성 : 스레드는 별도의 실행 흐름을 가지므로, 다른 스레드가 작업을 기다리지 않고 즉시 반응할 수 있어 응답 시간이 빠릅니다.
  - 자원 공유 : 동일 프로세스 내의 스레드는 메모리와 자원을 공유하여 효율적인 작업 처리가 가능합니다.
  - 경제성 : 스레드는 같은 프로세스 내에서 자원을 공유하므로, 새로운 프로세스를 생성하는 것보다 더 적은 자원을 사용하고 빠르게 생성할 수 있습니다.
- 스레드의 단점
  - 자원의 공유로 인한 동기화 문제가 발생할 수 있다.
  - 디버깅이 까다롭다.

## 프로세스 vs 스레드

| **특징**        | **프로세스**                   | **스레드**                                                      |
| --------------- | ------------------------------ | --------------------------------------------------------------- |
| **자원**        | 독립적인 자원 할당             | 자원 공유(같은 프로세스 내)                                     |
| **속도**        | 생성/종료 느림, 자원 소모 많음 | 생성/종료 빠르고 효율적                                         |
| **통신**        | 프로세스 간 직접 통신 불가능   | 스레드 간 직접 통신 가능                                        |
| **안정성**      | 높은 안정성 (독립적)           | 안정성 낮을 수 있음 (하나의 스레드 문제는 전체 프로세스에 영향) |
| **적합한 용도** | 독립적인 프로그램 실행         | 자원 공유가 필요한 병렬 처리                                    |

## 멀티 프로세싱

- 하나의 프로그램을 여러 개의 프로세스로 분할하여 동시에 실행하는 방식 (보통은 하나의 프로그램에 대해 하나의 프로세스가 생성된다)
- 각 프로세스 간 메모리 구분이 필요하거나 독립된 주소 공간을 가져야 할 경우 사용한다.
- 프로세스 중 하나에 문제가 생겨도 다른 프로세스에 영향을 주지 않아, 작업 속도가 다소 느리지만 정지되거나 하는 문제는 발생하지 않는다.

## 멀티 스레딩

- 하나의 프로세스 내에서 여러 스레드로 자원을 공유하며 작업을 나누어 수행하는 방식
- 메모리를 공유하면서 빠르게 처리해야 할 때 사용한다.
- 스레드 간의 통신이나 자원 공유가 용이하여 응답 시간은은 빠르지만 하나의 스레드에서 문제가 발생하면 다른 스레드들도 영향을 받아 전체 프로그램이 종료될 수 있다.

## 헷갈리는 용어

- 멀티 프로세스 : 하나의 프로그램에서 여러 개의 프로세스를 실행하는 것. 즉, 컴퓨터에서 여러 작업들을 동시에 수행하는 것
- 멀티 프로세서 : 여러 개의 cpu 코어가 하나의 시스템에서 동시에 실행되는 것. 즉, 하나의 컴퓨터에 CPU가 여러 개 붙어있는 것
